<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='UTF-8'>
        <title>图片的延迟加载（懒加载）</title>
        <style>
            * {
                margin: 0;
                padding: 0;
            }

            .img-wrap {
                width: 820px;
                height: 300px;
                margin: 50px auto;
                margin-top: 800px;
                background: #bbb;
            }

            .img-wrap img {
                width: 100%;
                display: none;
            }
        </style>
        <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
        <script>
            let imgWrap = $('.img-wrap');
            let img = imgWrap.children('img');
            let myWindow = $(window);
            // JQ中的事件绑定支持多事件绑定：window.onload & window.onscroll两个事件触发的时候执行相同的事情
            myWindow.on('load scroll', function () {
                if (img.attr('isLoad') === 'true') {
                    // 之前加载过则不会重新加载
                    return;
                }
                console.log(imgWrap);
                let $A = imgWrap.outerHeight() + imgWrap.offset().top;
                console.log($A);
                let $B = myWindow.outerHeight() + myWindow.scrollTop();
                console.log($B);
                if ($A < $B) {
                    // 加载真实图片
                    img.attr('src', img.attr('data-img'));
                    img.on('load', function () {
                        // 加载成功
                        // img.css('display', 'block');
                        // fadeIn是JQ中渐现动画
                        img.stop().fadeIn();
                    });
                    // attr存储的自定义属性都是字符串"true"
                    img.attr('isLoad', true);
                }
            });
        </script>
    </head>
    <body>
        <div class="img-wrap">
            <img src="" alt="" data-img="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582448053873&di=0205947c34d1fce40addee8fe546140a&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201806%2F07%2F20180607092743_wqbje.jpg">
        </div>
    </body>
</html>